.( ### small matrix creation with given values ) cr
2 3 matrix{ 1 2 3 4 5 6 }    \ create a 2x3 matrix
dup .                        \ create a view and print it

3 2 matrix ones              \ create a 3x2 matrix filled with 1s
* .                          \ multiply matrices and print

2drop                        \ drop the original two matrices

.( ### large matrix multiplication ) cr
512 1024 matrix rand         \ create a 512x1024 matrix with random values
1024 256 matrix ones         \ create a 1024x256 matrix filled with 1s
*                            \ multiply the matrices
1024 / . .                   \ scale down element-wise and print

.( ### benchmark ) cr
: mx clock >r                \ create a word for benchmark loops
  for * drop next            \ loop of matrix multiplication (and drop the result)
  clock r> - ;               \ clock it
see mx                       \ show the word
99 mx                        \ run 100 the multiplication loop 100 times

drop 2drop                   \ drop the original two matrices

.( ### matrix inversion ) cr
4 4 matrix randn             \ create a 4x4 matrix with normal distributed value
dup .                        \ check values
inverse                      \ deduce the inverse matrix
dup .                        \ see the inverse
*                            \ M*M^-1
.                            \ validate => identity matrix (-0.0000 OK, hopefully within EPS)

drop 2drop                   \ drop the last tow matrices

bye

